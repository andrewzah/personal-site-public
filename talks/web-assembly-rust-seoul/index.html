<!doctype html>
<html lang="en-us">
  <head>
      <title>Web Assembly: What is it? Does it do things? Let&#x27;s find out! | Andrew Zah</title>

      <meta charset="UTF-8">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="A talk on what WebAssembly actually is, ways to use it in Rust, and a case study.">
      <meta name="author" content="Andrew Zah">
      <meta name="keywords" content="talk pdf presentation web assembly rust 2019 seoul what is web assembly">

      <meta property="og:title" content="Web Assembly: What is it? Does it do things? Let&#x27;s find out! | Andrew Zah" />
      <meta property="og:author" content="Andrew Zah" />
      <meta property="og:description" content="A talk on what WebAssembly actually is, ways to use it in Rust, and a case study." />
      <meta property="article:author" content="Andrew Zah" />
      <meta property="og:type" content="article" />
      <meta property="og:url" content="andrewzah.com&#x2f;talks&#x2f;web-assembly-rust-seoul&#x2f;" />
      <meta property="og:image" content="https://andrewzah.com/og.jpg" />

      <meta name="twitter:card" content="summary">
      <meta name="twitter:site" content="@andrew_zah">
      <meta name="twitter:creator" content="@andrew_zah">
      <meta name="twitter:image" content="https://andrewzah.com/twitter-image.png">

      <meta name="google-site-verification" content="n5-uDhEF_Bwbyie5UOMQK1EdBy4iKsPQIGNJkSVlNU4" />

      <link rel="stylesheet" href="/main.css">

      <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=vMdnJYpmNaa">
      <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=vMdnJYpmNaa">
      <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=vMdnJYpmNaa">
      <link rel="manifest" href="/site.webmanifest?v=vMdnJYpmNaa">
      <link rel="mask-icon" href="/safari-pinned-tab.svg?v=vMdnJYpmNaa" color="#018a70">
      <link rel="shortcut icon" href="/favicon.ico?v=vMdnJYpmNaa">
      <meta name="msapplication-TileColor" content="#da532c">
      <meta name="theme-color" content="#ffffff">

      <script async src="/js/bundle.js"></script>
      
  </head>

  <script src="//instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  <body>
    <div class="container content">
      
        
  <nav>
    <div id="nav-links">
      
      <ul>
        <li><a href="/">Home</a></li>
        <li ><a href="/posts/">Posts</a></li>
        <li ><a href="/projects/">Projects</a></li>
        <li class="active"><a href="/talks/">Talks</a></li>
        <li ><a href="/friends/">Friends</a></li>
        <li ><a href="/contact/">Contact</a></li>
        <li ><a href="/quotes/">Quotes</a></li>
        <li><a href="/rss.xml">RSS</a></li>
      </ul>
    </div>
  </nav>

      

      <main>
  <div itemtype="http://schema.org/Article" class="container talks">
    <h1 itemprop="name">Web Assembly: What is it? Does it do things? Let&#x27;s find out!</h1>
    <div class="page-meta-data">
      <time itemprop="datePublished" content="2019-05-28" datetime="2019-05-28" >
          May 28, 2019
          
      </time>
      <span>â€“ Seoul Rust Meetup</span>
    </div>
    <div class="talk-buttons" itemtype="PresentationDigitalDocument">
      <a class="button button-primary" href="https:&#x2f;&#x2f;s3.amazonaws.com&#x2f;andrewzah.com&#x2f;talks&#x2f;2019-05-28&#x2f;ZahWebAssemblyRust-05-28-2019.pdf">Download PDF</a>
    </div>
    
      <a class="button button-secondary" href="yes"> Watch Video </a>
    
    <hr>
    <article itemprop="articleBody">
      <div id="email-me">
        <p>The following is the source code for this PDF.</p>

        <p>Have any observations, criticisms, or corrections? Feel free to <a href="mailto:talks@andrewzah.com">email me</a>. Have a nice day!</p>
      </div>
      <pre style="background-color:#ffffff;">
<span style="font-style:italic;color:#969896;">% !TEX program = XeLaTeX
</span><span style="font-weight:bold;color:#a71d5d;">\documentclass</span><span style="color:#323232;">[aspectratio=169]{</span><span style="color:#0086b3;">beamer</span><span style="color:#323232;">}
</span><span style="color:#62a35c;">\mode</span><span style="color:#323232;">&lt;presentation&gt;

</span><span style="font-weight:bold;color:#a71d5d;">\usepackage</span><span style="color:#323232;">{</span><span style="color:#0086b3;">tikz</span><span style="color:#323232;">}
</span><span style="font-weight:bold;color:#a71d5d;">\usepackage</span><span style="color:#323232;">{</span><span style="color:#0086b3;">pgfpages</span><span style="color:#323232;">} </span><span style="font-style:italic;color:#969896;">% notes
</span><span style="font-weight:bold;color:#a71d5d;">\usepackage</span><span style="color:#323232;">{</span><span style="color:#0086b3;">graphicx</span><span style="color:#323232;">}
</span><span style="font-weight:bold;color:#a71d5d;">\usepackage</span><span style="color:#323232;">{</span><span style="color:#0086b3;">color</span><span style="color:#323232;">} </span><span style="font-style:italic;color:#969896;">% for syntax highlighting definitions
</span><span style="font-weight:bold;color:#a71d5d;">\usepackage</span><span style="color:#323232;">{</span><span style="color:#0086b3;">fontspec</span><span style="color:#323232;">} </span><span style="font-style:italic;color:#969896;">% for custom firacode setup
</span><span style="font-weight:bold;color:#a71d5d;">\usepackage</span><span style="color:#323232;">{</span><span style="color:#0086b3;">listings</span><span style="color:#323232;">} </span><span style="font-style:italic;color:#969896;">% for formatting codeblocks
</span><span style="font-weight:bold;color:#a71d5d;">\usepackage</span><span style="color:#323232;">[T1]{</span><span style="color:#0086b3;">fontenc</span><span style="color:#323232;">}

</span><span style="color:#62a35c;">\usetheme</span><span style="color:#323232;">{AnnArbor}
</span><span style="color:#62a35c;">\usecolortheme</span><span style="color:#323232;">{spruce}
</span><span style="color:#62a35c;">\usecolortheme</span><span style="color:#323232;">{rose}

</span><span style="color:#62a35c;">\setbeamertemplate</span><span style="color:#323232;">{navigation symbols}{}
</span><span style="color:#62a35c;">\setbeamertemplate</span><span style="color:#323232;">{enumerate items}[default]
</span><span style="color:#62a35c;">\setbeamercolor</span><span style="color:#323232;">{item projected}{bg=green!40!black,fg=white}
</span><span style="color:#62a35c;">\setbeamercolor</span><span style="color:#323232;">{section in toc}{fg=black}
</span><span style="font-style:italic;color:#969896;">%\setbeameroption{show notes on second screen}


%% code syntax highlighting
</span><span style="color:#62a35c;">\definecolor</span><span style="color:#323232;">{lightgray}{rgb}{.9,.9,.9}
</span><span style="color:#62a35c;">\definecolor</span><span style="color:#323232;">{darkgray}{rgb}{.4,.4,.4}
</span><span style="color:#62a35c;">\definecolor</span><span style="color:#323232;">{purple}{rgb}{0.65, 0.12, 0.82}
</span><span style="color:#62a35c;">\definecolor</span><span style="color:#323232;">{gruv-red}{RGB}{204,36,29}
</span><span style="color:#62a35c;">\definecolor</span><span style="color:#323232;">{gruv-yellow}{RGB}{215,153,33}
</span><span style="color:#62a35c;">\definecolor</span><span style="color:#323232;">{gruv-aqua}{RGB}{104,157,106}
</span><span style="color:#62a35c;">\definecolor</span><span style="color:#323232;">{gruv-green}{RGB}{69,133,136}

</span><span style="color:#62a35c;">\lstdefinelanguage</span><span style="color:#323232;">{JavaScript}{
  keywords={break, case, then, catch, continue, debugger, default, delete, do, else, false, finally, for, function, if, in, instanceof, new, null, return, switch, this, throw, true, try, typeof, var, void, while, with},
  morecomment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]&#39;,
  morestring=[b]&quot;,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  keywordstyle=</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{gruv-green}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">,
  ndkeywordstyle=</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{darkgray}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">,
  identifierstyle=</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{black}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">,
  stringstyle=</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{darkgray}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">,
  frame=none,
  sensitive=true
}
</span><span style="color:#62a35c;">\lstdefinelanguage</span><span style="color:#323232;">{Rust}{
  keywordstyle=</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{gruv-yellow}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">,
  keywordstyle=[1]{</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{gruv-aqua}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">},
  keywordstyle=[2]{</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{gruv-yellow}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">},
  keywordstyle=[3]{</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{gruv-red}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">},
  morestring=[b]&quot;,
  morestring=[b]&#39;,
  stringstyle=</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{gray}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">,
  otherkeywords = {</span><span style="color:#0086b3;">\&amp;</span><span style="color:#323232;">Display, </span><span style="color:#0086b3;">\&amp;</span><span style="color:#323232;">str, </span><span style="color:#0086b3;">\#</span><span style="color:#183691;">\[</span><span style="color:#323232;">wasm</span><span style="color:#0086b3;">\_</span><span style="color:#323232;">bindgen</span><span style="color:#183691;">\]</span><span style="color:#323232;">},
  morekeywords=[1]{derive, </span><span style="color:#0086b3;">\#</span><span style="color:#183691;">\[</span><span style="color:#323232;">wasm</span><span style="color:#0086b3;">\_</span><span style="color:#323232;">bindgen</span><span style="color:#183691;">\]</span><span style="color:#323232;">, wasm</span><span style="color:#0086b3;">\_</span><span style="color:#323232;">bindgen, js</span><span style="color:#0086b3;">\_</span><span style="color:#323232;">namespace, console},
  morekeywords=[2]{Serialize, KoreanInteger, Deserialize, String, i128, i32, char, </span><span style="color:#0086b3;">\&amp;</span><span style="color:#323232;">str, </span><span style="color:#0086b3;">\&amp;</span><span style="color:#323232;">Display},
  morekeywords=[3]{use, pub, fn, extern, struct, self, impl},
  frame=none,
  sensitive=true
}
</span><span style="color:#62a35c;">\lstdefinelanguage</span><span style="color:#323232;">{WASM}{
  keywords=[1]{module, type, func, table, memory, export, param, result},
  keywordstyle=</span><span style="color:#62a35c;">\color</span><span style="color:#323232;">{gruv-green}</span><span style="color:#62a35c;">\ttfamily</span><span style="color:#323232;">,
  frame=none,
  sensitive=true
}

</span><span style="color:#62a35c;">\lstset</span><span style="color:#323232;">{</span><span style="font-style:italic;color:#969896;">%
</span><span style="color:#323232;">  basicstyle  = </span><span style="color:#62a35c;">\fontfamily</span><span style="color:#323232;">{pcr}</span><span style="color:#62a35c;">\fontsize</span><span style="color:#323232;">{10pt}{12pt}</span><span style="color:#62a35c;">\selectfont</span><span style="color:#323232;">,
  numberstyle = </span><span style="color:#62a35c;">\small</span><span style="color:#323232;">,
  numbersep   = 10pt,
  frame=none,
}

</span><span style="font-style:italic;color:#969896;">%% behavior modifications

</span><span style="color:#62a35c;">\newenvironment</span><span style="color:#323232;">{wideitemize}{</span><span style="color:#62a35c;">\itemize\addtolength</span><span style="color:#323232;">{</span><span style="color:#62a35c;">\itemsep</span><span style="color:#323232;">}{10pt}}{</span><span style="color:#62a35c;">\enditemize</span><span style="color:#323232;">}
</span><span style="color:#62a35c;">\AtBeginSection</span><span style="color:#323232;">[]
{
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
        </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">Journey</span><span style="color:#323232;">}
        </span><span style="color:#62a35c;">\tableofcontents</span><span style="color:#323232;">[currentsection]
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}
}

</span><span style="font-style:italic;color:#969896;">%% metadata

</span><span style="color:#62a35c;">\title</span><span style="color:#323232;">[WASM!]{Web Assembly: What does it do? Does it do things? Let&#39;s find out!}
</span><span style="color:#62a35c;">\author</span><span style="color:#323232;">[]{Andrew Zah </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{&lt;zah@andrewzah.com&gt;}}
</span><span style="color:#62a35c;">\institute</span><span style="color:#323232;">[Rust Meetup Seoul]{Rust Meetup Seoul}
</span><span style="color:#62a35c;">\date</span><span style="color:#323232;">{May 28, 2019}

</span><span style="font-style:italic;color:#969896;">%% preamble over

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{document}
</span><span style="color:#62a35c;">\maketitle

\section*</span><span style="color:#323232;">{Journey}
</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\tableofcontents
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-style:italic;color:#969896;">%%%%%%%%%%%%%%%%%%%

</span><span style="color:#62a35c;">\section</span><span style="color:#323232;">{What is WASM?}
</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">Web Assembly&#39;s Definition</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{from webassembly.org (emphasis mine)}
    WebAssembly (abbreviated Wasm) is a </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{binary instruction format} for a </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{stack-based virtual machine}. Wasm is designed as a </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{portable target} for compilation of high-level languages like C/C++/Rust, enabling </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{deployment on the web} for client and server applications.
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">What WASM is not</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> WASM is not a programming language, though you can write by hand
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; WASM isn&#39;t standalone: it needs a host
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; WASM is not intended to replace javascript
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">what is it actually, though?</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> WASM&#39;s format isn&#39;t coupled to any OS or architecture
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; Very similar to Java&#39;s bytecode or C</span><span style="color:#0086b3;">\#</span><span style="color:#323232;">&#39;s CLR
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; Name and definition is a misnomer
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;4-&gt; It can run </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{anywhere} you can build a </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{host}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">WASM&#39;s specification</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> WASM is </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{stack-based}, not register-based
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; WASM 1.0 only has 4 primitives
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; `i32`, `i64`, `f32`, `f64` 
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;4-&gt; No arrays
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;5-&gt; no </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{jmp} instruction
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
  </span><span style="color:#62a35c;">\note</span><span style="color:#323232;">[item]{Forth and retro are just about the only somewhat-mainline language that are stack-based.}
  </span><span style="color:#62a35c;">\note</span><span style="color:#323232;">[item]{RPL also exists but</span><span style="color:#62a35c;">\ldots</span><span style="color:#323232;">}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">memory</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{columns}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{column}{0.5</span><span style="color:#62a35c;">\textwidth</span><span style="color:#323232;">}
      </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
        </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> WASM has no </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{new::()} operator or </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{heap}
        </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; There are no objects or or garbage collection
        </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; Instead, WASM has </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{linear memory}
        </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;4-&gt; this causes a need for linearization and bitmasking, etc
      </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{column}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{column}{0.5</span><span style="color:#62a35c;">\textwidth</span><span style="color:#323232;">}
      </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{center}
        </span><span style="color:#62a35c;">\uncover</span><span style="color:#323232;">&lt;3-&gt; {
          </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{tikzpicture}
            </span><span style="color:#62a35c;">\draw</span><span style="color:#323232;"> [gray] (0,0) rectangle (4,1) node[pos=.5] {unused};
            </span><span style="color:#62a35c;">\draw</span><span style="color:#323232;"> [teal] (0,1) rectangle (4,2) node[pos=.5] {var3 [80</span><span style="color:#62a35c;">\ldots</span><span style="color:#323232;">119]};
            </span><span style="color:#62a35c;">\draw</span><span style="color:#323232;"> [gray] (0,2) rectangle (4,3) node[pos=.5] {var2 [40</span><span style="color:#62a35c;">\ldots</span><span style="color:#323232;">79]};
            </span><span style="color:#62a35c;">\draw</span><span style="color:#323232;"> [teal] (0,3) rectangle (4,4) node[pos=.5] {var1 [0</span><span style="color:#62a35c;">\ldots</span><span style="color:#323232;">39]};
          </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{tikzpicture}
        }
      </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{center}
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{column}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{columns}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">anyone can be a WASM host!</span><span style="color:#323232;">}
  
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{alertblock}{The Host needs to:}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{enumerate}
      </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> Load and validate the WASM binary (the file, not the logic)
      </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; Expose Exports
      </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; Satisfy Imports
      </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;4-&gt; Interpret </span><span style="color:#0086b3;">\&amp;</span><span style="color:#323232;"> Execute Modules
      </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;5-&gt; Isolate Modules
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{enumerate}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{alertblock}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">infinity and beyond?</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> WebAssembly modules are hotswappable
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; PLCs (Programmable Logic Controllers) could adhere to a well-known contract
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; This would let us program for hardware controllers in </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{any language}!
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{wasmi} is an rust open-source wasm interpreter
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;4-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{serverless-wasm} does indeed exist
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">security</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> WASM binaries can always be converted back to plaintext
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; Do not put secrets in WASM modules
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{Message handoffs} are not always secure!
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;4-&gt; Accordingly, </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{sign} and </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{encrypt} modules!
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">add example: rust side</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{main.rs}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}[language=rust]
#[no_mangle]
pub extern &quot;C&quot; fn add_one(x: i32) -&gt; i32 {
    x + 1
}
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">add example: generated WASM</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{main.wasm}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}[language=wasm]
(module
  (type $t0 (func (param i32) (result i32)))
  (func $add_one
      (export &quot;add_one&quot;) (type $t0) (param $p0 i32) (result i32)
    get_local $p0
    i32.const 1
    i32.add)
  (table $T0 1 1 anyfunc)
  (memory $memory (export &quot;memory&quot;) 17))
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">summary</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> WASM is simply a instruction format that&#39;s portable
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> WASM can run anywhere so long as a host exists
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> Just because you can write WASM doesn&#39;t mean you should
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-style:italic;color:#969896;">%%%%%%%%%%%%%%%%%%%

</span><span style="color:#62a35c;">\section</span><span style="color:#323232;">{Applications of WASM in Rust}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">wasm-bindgen</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> CLI tool to generate bindings for the wasm code to work
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; can be run manually but </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{wasm-pack} simplifies things
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{automates} linearization, strings, complex types bindings
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">configuring cargo</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{Cargo.toml}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}
[lib]
crate-type = [&quot;cdylib&quot;]

[build]
target = &quot;wasm32-unknown-unknown&quot;

[dependencies]
wasm-bindgen = &quot;0.2.45&quot;

[dependencies.rand]
features = [&quot;wasm-bindgen&quot;]
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">rust wasm:  functions</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{main.rs}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}[language=rust]
use wasm_bindgen::prelude::*;
#[wasm_bindgen]
extern &quot;C&quot; {
    #[wasm_bindgen(js_namespace = console)]
    fn log(s: &amp;str);
    #[wasm_bindgen(method, structural, js_namespace = ROT)]
    fn draw(this: &amp;Display, x: i32, y: i32, ch: &amp;str);
}

#[wasm_bindgen]
pub fn greet(name: &amp;str) {
    log(&amp;format!(&quot;Hello, {}!&quot;, name));
}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">js\_sys and web\_sys provide bindings</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{main.rs}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}[language=rust]
use wasm_bindgen::prelude::*;
use wasm_bindgen::JsValue;
use web_sys::console::log_1;

#[wasm_bindgen]
pub fn hi() {
  log_1(JsValue::from_str(&quot;hi&quot;));
}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">rust wasm: structs and impls</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{main.rs}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}[language=rust]
#[wasm_bindgen]
pub struct Counter { count: i32, }

#[wasm_bindgen]
impl Counter {
  pub fn get(&amp;self) -&gt; char {
    log(format!(&quot;Count: {}&quot;, self.count));
    self.count
  }
}
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}


</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">wasm-pack</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;1-&gt; higher level wrapper for </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{wasm-bindgen}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; commands: </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{build}, </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{test}, </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{pack}, </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{publish}, </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{login}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{wasm-bindgen} is still a dependency
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">wasm-pack output in /pkg</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{exa -T -L1 pkg/}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}
pkg/
  package.json
  wasm_pack_test.d.ts
  wasm_pack_test.js
  wasm_pack_test_bg.d.ts
  wasm_pack_test_bg.wasm
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">wasm-pack output</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{main.js}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}[language=javascript]
const wasm = import(&#39;./pkg/hello_world&#39;);

wasm
  .then(m =&gt; m.greet(&#39;World!&#39;))
  .catch(console.error);
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">extensions and alternatives</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{web-sys} and </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{js-sys} provide raw js/web API bindings
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{std-web} has a similar goal but provides more JS interop + APIs
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{rust-neon} (external tool) generates </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{Node.js} modules
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;4-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{yew} is a web framework that compiles to WASM
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">optimizing the WASM output</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{columns}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{column}{0.6</span><span style="color:#62a35c;">\textwidth</span><span style="color:#323232;">}
      </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
        </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{wasm-opt} can significantly reduce binary size 
        </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{wasm2wat} can be used to confirm
        </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{twiggy} is a wasm profiler that analyzes call graphs
        </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;4-&gt; set </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{lto = true} in Cargo.toml, but limit to release only
      </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{column}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{column}{0.4</span><span style="color:#62a35c;">\textwidth</span><span style="color:#323232;">}
      </span><span style="color:#62a35c;">\uncover</span><span style="color:#323232;">&lt;3-&gt;{
        </span><span style="color:#62a35c;">\includegraphics</span><span style="color:#323232;">[scale=0.34]{twiggy.png}
      }
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{column}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{columns}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-style:italic;color:#969896;">%%%%%%%%%%%%%%%%%%%

</span><span style="color:#62a35c;">\section</span><span style="color:#323232;">{A Real, Non-Trivial WASM App}
</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">korean apps</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{wideitemize}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;"> Initially I wrote a cargo crate, </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{korean-numbers}
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;2-&gt; I wanted a way to use this logic in a webapp with React
    </span><span style="color:#62a35c;">\item</span><span style="color:#323232;">&lt;3-&gt; I went with </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{wasm-bindgen} calls in </span><span style="color:#62a35c;">\alert</span><span style="color:#323232;">{package.json} scripts
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{wideitemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">project structure</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{exa -T -L2 .}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}
dist/
frontend/
native/
node_modules/
package.json
webpack.config.js
yarn.lock
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">why wasm-pack may be better</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{package.json}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}
&quot;scripts&quot;: {
  &quot;build-debug&quot;: &quot;cd native; cargo +nightly build
      --target wasm32-unknown-unknown
    &amp;&amp; wasm-bindgen
        target/wasm32-unknown-unknown/debug/korean_wasm.wasm
      --out-dir ../frontend/wasm; cd ..&quot;
}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">rust side: glue code</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{native/src/lib.rs}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}[language=rust]
use korean_nums::{ NumberSystem, ...}
#[wasm_bindgen]
struct KoreanInteger { number: i128, hangeul: String, }

#[wasm_bindgen]
pub fn random_korean_int(
  lower_str: &amp;str, upper_str: &amp;str, num_system: &amp;str)
  -&gt; KoreanInteger
{ ... }
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">frontend layout</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{exa -T -L2 frontend/}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}
components/
  korean_numbers/
index.html
index.js
wasm/
  korean_wasm.d.ts
  korean_wasm.js
  korean_wasm_bg.d.ts
  korean_wasm_bg.wasm
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">calling code from the frontend</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{frontend/components/korean</span><span style="color:#0086b3;">\_</span><span style="color:#323232;">numbers/index.js}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}[language=javascript]
const { random_int } = require(&quot;../../wasm/korean_wasm&quot;);

const res = random_korean_int(0, 10, &quot;sino&quot;);
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">non-trivial optimizations</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{columns}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{column}{0.45</span><span style="color:#62a35c;">\textwidth</span><span style="color:#323232;">}
      </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{ls -lah | rg wasm | awk `{print </span><span style="color:#0086b3;">\$</span><span style="color:#323232;">5, </span><span style="color:#0086b3;">\$</span><span style="color:#323232;">9}&#39; | sort}
        </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}
282K wasm-opt-Oz-flag.wasm
283K wasm-opt-Os-flag.wasm
306K wasm-opt-O3-flag.wasm
573K wasm-opt-default.wasm
695K bindgen-development.wasm
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{column}
    </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{column}{0.45</span><span style="color:#62a35c;">\textwidth</span><span style="color:#323232;">}&lt;2-&gt;
      </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{release mode versions}
        </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}
126K wasm-opt-lto-Oz-flag.wasm
136K bindgen-release-lto.wasm
166K bindgen-release.wasm
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
    </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{column}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{columns}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">inspecting with twiggy</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{twiggy top wasm-bindgen-default.wasm}
</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}
Shallow Bytes â”‚ Shallow </span><span style="font-style:italic;color:#969896;">% â”‚ Item
</span><span style="color:#323232;">124493 | 17.50</span><span style="font-style:italic;color:#969896;">% | &quot;function names&quot; subsection
</span><span style="color:#323232;">57598  |  8.10</span><span style="font-style:italic;color:#969896;">% | rand_hc::hc128::Hc128Core::sixteen_steps
</span><span style="color:#323232;">50394  |  7.09</span><span style="font-style:italic;color:#969896;">% | &lt;rand_hc::hc128::Hc128Core&gt;...::generate
</span><span style="color:#323232;">24781  |  3.48</span><span style="font-style:italic;color:#969896;">% | data[1]
</span><span style="color:#323232;">22978  |  3.23</span><span style="font-style:italic;color:#969896;">% | data[2]
</span><span style="color:#323232;"> 7624  |  1.07</span><span style="font-style:italic;color:#969896;">% | &lt;rand::rngs::entropy::EntropyRng&gt;...::try_fill_bytes
</span><span style="color:#323232;"> 6928  |  0.97</span><span style="font-style:italic;color:#969896;">% | korean_nums::parse::parse_hangeul_sino
</span><span style="color:#323232;"> 4918  |  0.69</span><span style="font-style:italic;color:#969896;">% | core::num::flt2dec::strategy::dragon::mul_pow10
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[fragile]
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">inspecting release mode with twiggy</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{block}{twiggy top wasm-opt-Oz-release-lto.wasm}
</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{lstlisting}
Shallow Bytes â”‚ Shallow </span><span style="font-style:italic;color:#969896;">% â”‚ Item
</span><span style="color:#323232;">9753 | 7.55</span><span style="font-style:italic;color:#969896;">% | data[0]
</span><span style="color:#323232;">8556 | 6.62</span><span style="font-style:italic;color:#969896;">% | code[33]
</span><span style="color:#323232;">8457 | 6.54</span><span style="font-style:italic;color:#969896;">% | data[1]
</span><span style="color:#323232;">7012 | 5.42</span><span style="font-style:italic;color:#969896;">% | code[76]
</span><span style="color:#323232;">6156 | 4.76</span><span style="font-style:italic;color:#969896;">% | code[127]
</span><span style="color:#323232;">6145 | 4.75</span><span style="font-style:italic;color:#969896;">% | code[75]
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{lstlisting}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{block}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{center}
    {</span><span style="color:#62a35c;">\huge</span><span style="color:#323232;"> Thank you} </span><span style="color:#0086b3;">\\</span><span style="color:#323232;">
    Andrew Zah
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{center}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-style:italic;color:#969896;">%%%%%%%%%%%%%%%%%%%

</span><span style="color:#62a35c;">\section*</span><span style="color:#323232;">{Appendix}
</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}[plain]
  </span><span style="color:#62a35c;">\includegraphics</span><span style="color:#323232;">[scale=0.34]{webassembly-studio.png}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">further reading</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{itemize}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{WASM Homepage} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://webassembly.org}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{WASM Spec} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://webassembly.github.io/spec/}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{wasm-bindgen docs} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://rustwasm.github.io/docs/wasm-bindgen/}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{stdweb} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://github.com/koute/stdweb}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{twiggy profiler} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://github.com/rustwasm/twiggy}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{wat2wasm, wasm2wat, and more} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://github.com/WebAssembly/wabt}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{websys} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://rustwasm.github.io/wasm-bindgen/api/web</span><span style="color:#0086b3;">\_</span><span style="color:#323232;">sys/}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{neon-bindings} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://github.com/neon-bindings/neon}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{optimizing emscriptem} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://emscripten.org/docs/optimizing/Optimizing-Code.html}
    </span><span style="color:#62a35c;">\item \alert</span><span style="color:#323232;">{wasmi: rust wasm interpreter} </span><span style="color:#62a35c;">\texttt</span><span style="color:#323232;">{https://github.com/paritytech/wasmi}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{itemize}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{frame}
  </span><span style="color:#62a35c;">\frametitle</span><span style="color:#323232;">{</span><span style="font-weight:bold;color:#795da3;">bibliography</span><span style="color:#323232;">}
  </span><span style="font-weight:bold;color:#a71d5d;">\begin</span><span style="color:#323232;">{thebibliography}{Dijkstra, 1982}
    </span><span style="color:#62a35c;">\bibitem</span><span style="color:#323232;">[Hoffman, 2019]{Hoffman2019}
      K.</span><span style="color:#0086b3;">~</span><span style="color:#323232;">Hoffman.
      </span><span style="color:#62a35c;">\newblock</span><span style="color:#323232;">{</span><span style="color:#62a35c;">\em</span><span style="color:#323232;"> Programming WebAssembly with Rust </span><span style="color:#0086b3;">\\
        </span><span style="color:#62a35c;">\small</span><span style="color:#323232;"> Unified Development for Web, Mobile, and Embedded Applications }
      </span><span style="color:#62a35c;">\newblock</span><span style="color:#323232;">{The Pragmatic Programmers, LLC}
      </span><span style="color:#62a35c;">\newblock</span><span style="color:#323232;">{ISBN-13: 978-1-68050-636-5}
  </span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{thebibliography}
</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{frame}

</span><span style="font-weight:bold;color:#a71d5d;">\end</span><span style="color:#323232;">{document}

</span></pre>
    </article>
  </div>
</main>
    </div>

    <div class="after-content">
      <div class="container">
        <div>
  <div id="after-main" class="container">
    <div id="random-quote">
      <h2> Random quote </h2>
      <blockquote id="random-quote-quote"></blockquote>
      <p id="random-quote-citation">
        <span id="random-quote-author"></span>
        <span id="random-quote-source"></span>
      </p>
    </div>
    <hr>

    <div class="container after-post">
        

        

        
          
  
  <div class="tags">
    Tags: 
    
      
        <a href="/tags/rust/">Rust</a> | 
      
    
      
        <a href="/tags/webassembly/">Webassembly</a>
      
    
  </div>

  
  <div class="categories">
    Categories: 
    
      
        <a href="/categories/talks/">Talks</a>
      
    
  </div>


        
    </div>

    <hr>
    </div>

    <footer class="footer">
    <small>
        &copy; Copyright Andrew Zah <time datetime="2019">2019</time>.
        | <a href="/contact">Contact</a>
        | <a href="https://git.sr.ht/~andrewzah/personal-site/tree">Site Source Code (AGPLv3)</a>
    </small>
</footer>

    </div>
      </div>
    </div>
  </body>
</html>
